(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{292:function(e,t,n){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},r=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},i=function(e){return decodeURIComponent(e).replace(/\+/g," ")};"URLSearchParams"in e&&"a=1"===new URLSearchParams("?a=1").toString()||function(){var o=function(e){if(Object.defineProperty(this,"_entries",{writable:!0,value:{}}),"string"==typeof e)""!==e&&this._fromString(e);else if(e instanceof o){var t=this;e.forEach(function(e,n){t.append(n,e)})}},a=o.prototype;a.append=function(e,t){e in this._entries?this._entries[e].push(t.toString()):this._entries[e]=[t.toString()]},a.delete=function(e){delete this._entries[e]},a.get=function(e){return e in this._entries?this._entries[e][0]:null},a.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},a.has=function(e){return e in this._entries},a.set=function(e,t){this._entries[e]=[t.toString()]},a.forEach=function(e,t){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)e.call(t,n[i],r,this)}},a.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),n(e)},a.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},a.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),n(e)},t&&(a[Symbol.iterator]=a.entries),a.toString=function(){var e=[];return this.forEach(function(t,n){e.push(r(n)+"="+r(t))}),e.join("&")},Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){this._entries={};for(var t,n=(e=e.replace(/^\?/,"")).split("&"),r=0;r<n.length;r++)t=n[r].split("="),this.append(i(t[0]),t.length>1?i(t[1]):"")}}),e.URLSearchParams=o}(),"function"!=typeof URLSearchParams.prototype.sort&&(URLSearchParams.prototype.sort=function(){var e=this,t=[];this.forEach(function(n,r){t.push([r,n]),e._entries||e.delete(r)}),t.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t));var r,i=document;if(n&&(void 0===e.location||n!==e.location.href)){(r=(i=document.implementation.createHTMLDocument("")).createElement("base")).href=n,i.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var o=i.createElement("a");if(o.href=t,r&&(i.body.appendChild(o),o.href=o.href),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o});var a=new URLSearchParams(this.search),s=!0,c=!0,h=this;["append","delete","set"].forEach(function(e){var t=a[e];a[e]=function(){t.apply(a,arguments),s&&(c=!1,h.search=a.toString(),c=!0)}}),Object.defineProperty(this,"searchParams",{value:a,enumerable:!0});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==u&&(u=this.search,c&&(s=!1,this.searchParams._fromString(this.search),s=!0))}})},r=n.prototype;["hash","host","hostname","port","protocol"].forEach(function(e){!function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)}),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval(function(){e.location.origin=t()},100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,n(82))},293:function(e,t,n){"use strict";n.r(t);n(292);var r=n(114),i=n(113),o=n(112);t.default=class{constructor(){}getNews(e){let t=e.map(e=>{let t={source:e,apiKey:i.a.ApiKey,type:"Get"};return Object(o.a)(i.a.ArticlesUrl,t)});(new r.a).sendRequestForJson(t,this.showNews)}showNews(e){let t=document.getElementById("news-container");t.innerHTML="";let n=[];for(let t=0;t<e.length;t++)n.push(...e[t].articles);n=n.sort((e,t)=>Date.parse(t.publishedAt)-Date.parse(e.publishedAt));for(let e=0;e<i.a.NumberOfNews;e++){if(!n[e])return;let r=n[e],i=document.createElement("div"),o=r.publishedAt?`Published: ${r.publishedAt.substr(0,10)}. `:"",a=r.description?r.description:"",s="";s=/(?<=http)s?:\/\//i.test(r.urlToImage)?`<img src='${r.urlToImage}'/></a>`:r.urlToImage?`<img src='${r.url.toString().concat(r.urlToImage)}'/></a>`:"See more...",i.innerHTML=`<div class='article'>\n                <div class='article-header'><h2>${r.title}</h2></div>\n                <div class='article-body'> <a href='${r.url}' target='_blank'>${s}</a> ${a}</div>\n                <div class='article-footer'> \n                    ${o}\n                    <a href='https://newsapi.org' target='_blank'>Powered by NewsAPI.org</a>\n                </div>\n            </div>`,t.appendChild(i)}}applyFilters(){let e=Array.prototype.slice.call(document.getElementsByClassName("source-checkbox"),0).filter(e=>e.checked).map(e=>e.id);this.getNews(e)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXJsLXBvbHlmaWxsL3VybC1wb2x5ZmlsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvc2VydmljZXMvQXJ0aWNsZXNTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImdsb2JhbCIsIml0ZXJhdG9yU3VwcG9ydGVkIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJlcnJvciIsImNoZWNrSWZJdGVyYXRvcklzU3VwcG9ydGVkIiwiY3JlYXRlSXRlcmF0b3IiLCJpdGVtcyIsIm5leHQiLCJ2YWx1ZSIsInNoaWZ0IiwiZG9uZSIsInNlcmlhbGl6ZVBhcmFtIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSIsImRlc2VyaWFsaXplUGFyYW0iLCJkZWNvZGVVUklDb21wb25lbnQiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsInNlYXJjaFN0cmluZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidGhpcyIsIndyaXRhYmxlIiwiX2Zyb21TdHJpbmciLCJfdGhpcyIsImZvckVhY2giLCJuYW1lIiwiYXBwZW5kIiwicHJvdG8iLCJwcm90b3R5cGUiLCJfZW50cmllcyIsInB1c2giLCJkZWxldGUiLCJnZXQiLCJnZXRBbGwiLCJzbGljZSIsImhhcyIsInNldCIsImNhbGxiYWNrIiwidGhpc0FyZyIsImVudHJpZXMiLCJoYXNPd25Qcm9wZXJ0eSIsImkiLCJsZW5ndGgiLCJjYWxsIiwia2V5cyIsInZhbHVlcyIsInNlYXJjaEFycmF5Iiwiam9pbiIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJhdHRyaWJ1dGUiLCJhdHRyaWJ1dGVzIiwic3BsaXQiLCJwb2x5ZmlsbFVSTFNlYXJjaFBhcmFtcyIsInNvcnQiLCJhIiwiYiIsIndpbmRvdyIsInNlbGYiLCJ1IiwiVVJMIiwicGF0aG5hbWUiLCJocmVmIiwic2VhcmNoUGFyYW1zIiwiZSIsImNoZWNrSWZVUkxJc1N1cHBvcnRlZCIsIl9VUkwiLCJ1cmwiLCJiYXNlIiwiU3RyaW5nIiwiYmFzZUVsZW1lbnQiLCJkb2MiLCJkb2N1bWVudCIsImxvY2F0aW9uIiwiaW1wbGVtZW50YXRpb24iLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaW5kZXhPZiIsIkVycm9yIiwiZXJyIiwiYW5jaG9yRWxlbWVudCIsImJvZHkiLCJwcm90b2NvbCIsInRlc3QiLCJUeXBlRXJyb3IiLCJzZWFyY2giLCJlbmFibGVTZWFyY2hVcGRhdGUiLCJlbmFibGVTZWFyY2hQYXJhbXNVcGRhdGUiLCJtZXRob2ROYW1lIiwibWV0aG9kIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJhdHRyaWJ1dGVOYW1lIiwiX2FuY2hvckVsZW1lbnQiLCJsaW5rVVJMV2l0aEFuY2hvckF0dHJpYnV0ZSIsIl91cGRhdGVTZWFyY2hQYXJhbXMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwib3JpZ2luIiwiZXhwZWN0ZWRQb3J0IiwiaHR0cDoiLCJodHRwczoiLCJmdHA6IiwiYWRkUG9ydFRvT3JpZ2luIiwicG9ydCIsImhvc3RuYW1lIiwicGFzc3dvcmQiLCJ1c2VybmFtZSIsImNyZWF0ZU9iamVjdFVSTCIsImJsb2IiLCJyZXZva2VPYmplY3RVUkwiLCJwb2x5ZmlsbFVSTCIsImdldE9yaWdpbiIsInNldEludGVydmFsIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInIiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiX2NvcmVfVXRpbHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9jb3JlX0NvbnN0YW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiX2NvcmVfVXJsRmFjdG9yeV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fIiwiW29iamVjdCBPYmplY3RdIiwic291cmNlIiwidXJscyIsIm1hcCIsInMiLCJwYXJhbXMiLCJhcGlLZXkiLCJBcGlLZXkiLCJ0eXBlIiwiQXJ0aWNsZXNVcmwiLCJzZW5kUmVxdWVzdEZvckpzb24iLCJzaG93TmV3cyIsImRhdGEiLCJuZXdzQ29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJhcnRpY2xlcyIsIngiLCJ5IiwiRGF0ZSIsInBhcnNlIiwicHVibGlzaGVkQXQiLCJOdW1iZXJPZk5ld3MiLCJhcnQiLCJhcnRpY2xlVGVtcGxhdGUiLCJwdWJsaXNoZWQiLCJzdWJzdHIiLCJhcnREZXNjIiwiZGVzY3JpcHRpb24iLCJhcnRJbWciLCJ1cmxUb0ltYWdlIiwiY29uY2F0IiwidGl0bGUiLCJzb3VyY2VzSWRzIiwiQXJyYXkiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZmlsdGVyIiwiYyIsImNoZWNrZWQiLCJpZCIsImdldE5ld3MiXSwibWFwcGluZ3MiOiI4RUFBQSxTQUFBQSxJQUFBLFNBQUFBLEdBT0EsSUFTQUMsRUFUQSxXQUNBLElBQ0EsUUFBQUMsT0FBQUMsU0FDSyxNQUFBQyxHQUNMLFVBS0FDLEdBRUFDLEVBQUEsU0FBQUMsR0FDQSxJQUFBSixFQUFBLENBQ0FLLEtBQUEsV0FDQSxJQUFBQyxFQUFBRixFQUFBRyxRQUNBLE9BQWdCQyxVQUFBLElBQUFGLGFBVWhCLE9BTkFSLElBQ0FFLEVBQUFELE9BQUFDLFVBQUEsV0FDQSxPQUFBQSxJQUlBQSxHQU9BUyxFQUFBLFNBQUFILEdBQ0EsT0FBQUksbUJBQUFKLEdBQUFLLFFBQUEsYUFHQUMsRUFBQSxTQUFBTixHQUNBLE9BQUFPLG1CQUFBUCxHQUFBSyxRQUFBLFlBd0hBLG9CQUFBZCxHQUFBLFlBQUFpQixnQkFBQSxRQUFBQyxZQXJIQSxXQUVBLElBQUFELEVBQUEsU0FBQUUsR0FHQSxHQUZBQyxPQUFBQyxlQUFBQyxLQUFBLFlBQStDQyxVQUFBLEVBQUFkLE1BQUEsS0FFL0MsaUJBQUFVLEVBQ0EsS0FBQUEsR0FDQUcsS0FBQUUsWUFBQUwsUUFFTyxHQUFBQSxhQUFBRixFQUFBLENBQ1AsSUFBQVEsRUFBQUgsS0FDQUgsRUFBQU8sUUFBQSxTQUFBakIsRUFBQWtCLEdBQ0FGLEVBQUFHLE9BQUFELEVB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QUFBN0UsSUFBQW5ELFdBQUF3SSxPQUFBUixFQUFBTyxxQkFBMEMsY0FHakdOLEVBQUFULG9GQUNrRFEsRUFBQVMseUVBQ0lULEVBQUE3RSx3QkFBNEJtRixTQUFjRiwrRUFFMUVGLDhJQUt0QlosRUFBQXhELFlBQUFtRSxJQUlBeEIsZUFDQSxJQUFBaUMsRUFBQUMsTUFBQS9ILFVBQUFNLE1BQUFTLEtBQUE2QixTQUFBb0YsdUJBQUEsc0JBQ0FDLE9BQUFDLEtBQUFDLFNBQ0FuQyxJQUFBa0MsS0FBQUUsSUFDQTVJLEtBQUE2SSxRQUFBUCIsImZpbGUiOiIwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihnbG9iYWwpIHtcclxuICAvKipcclxuICAgKiBQb2x5ZmlsbCBVUkxTZWFyY2hQYXJhbXNcclxuICAgKlxyXG4gICAqIEluc3BpcmVkIGZyb20gOiBodHRwczovL2dpdGh1Yi5jb20vV2ViUmVmbGVjdGlvbi91cmwtc2VhcmNoLXBhcmFtcy9ibG9iL21hc3Rlci9zcmMvdXJsLXNlYXJjaC1wYXJhbXMuanNcclxuICAgKi9cclxuXHJcbiAgdmFyIGNoZWNrSWZJdGVyYXRvcklzU3VwcG9ydGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gISFTeW1ib2wuaXRlcmF0b3I7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIHZhciBpdGVyYXRvclN1cHBvcnRlZCA9IGNoZWNrSWZJdGVyYXRvcklzU3VwcG9ydGVkKCk7XHJcblxyXG4gIHZhciBjcmVhdGVJdGVyYXRvciA9IGZ1bmN0aW9uKGl0ZW1zKSB7XHJcbiAgICB2YXIgaXRlcmF0b3IgPSB7XHJcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KCk7XHJcbiAgICAgICAgcmV0dXJuIHsgZG9uZTogdmFsdWUgPT09IHZvaWQgMCwgdmFsdWU6IHZhbHVlIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaWYgKGl0ZXJhdG9yU3VwcG9ydGVkKSB7XHJcbiAgICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gaXRlcmF0b3I7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGl0ZXJhdG9yO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlYXJjaCBwYXJhbSBuYW1lIGFuZCB2YWx1ZXMgc2hvdWxkIGJlIGVuY29kZWQgYWNjb3JkaW5nIHRvIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsZW5jb2RlZC1zZXJpYWxpemluZ1xyXG4gICAqIGVuY29kZVVSSUNvbXBvbmVudCgpIHByb2R1Y2VzIHRoZSBzYW1lIHJlc3VsdCBleGNlcHQgZW5jb2Rpbmcgc3BhY2VzIGFzIGAlMjBgIGluc3RlYWQgb2YgYCtgLlxyXG4gICAqL1xyXG4gIHZhciBzZXJpYWxpemVQYXJhbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKS5yZXBsYWNlKC8lMjAvZywgJysnKTtcclxuICB9O1xyXG5cclxuICB2YXIgZGVzZXJpYWxpemVQYXJhbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcclxuICB9O1xyXG5cclxuICB2YXIgcG9seWZpbGxVUkxTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgVVJMU2VhcmNoUGFyYW1zID0gZnVuY3Rpb24oc2VhcmNoU3RyaW5nKSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX2VudHJpZXMnLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSk7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIHNlYXJjaFN0cmluZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAoc2VhcmNoU3RyaW5nICE9PSAnJykge1xyXG4gICAgICAgICAgdGhpcy5fZnJvbVN0cmluZyhzZWFyY2hTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChzZWFyY2hTdHJpbmcgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHNlYXJjaFN0cmluZy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgICAgICBfdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBwcm90byA9IFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGU7XHJcblxyXG4gICAgcHJvdG8uYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcclxuICAgICAgaWYgKG5hbWUgaW4gdGhpcy5fZW50cmllcykge1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXNbbmFtZV0ucHVzaCh2YWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9lbnRyaWVzW25hbWVdID0gW3ZhbHVlLnRvU3RyaW5nKCldO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgZGVsZXRlIHRoaXMuX2VudHJpZXNbbmFtZV07XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgcmV0dXJuIChuYW1lIGluIHRoaXMuX2VudHJpZXMpID8gdGhpcy5fZW50cmllc1tuYW1lXVswXSA6IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLmdldEFsbCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgcmV0dXJuIChuYW1lIGluIHRoaXMuX2VudHJpZXMpID8gdGhpcy5fZW50cmllc1tuYW1lXS5zbGljZSgwKSA6IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90by5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgIHJldHVybiAobmFtZSBpbiB0aGlzLl9lbnRyaWVzKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJvdG8uc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcclxuICAgICAgdGhpcy5fZW50cmllc1tuYW1lXSA9IFt2YWx1ZS50b1N0cmluZygpXTtcclxuICAgIH07XHJcblxyXG4gICAgcHJvdG8uZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgIHZhciBlbnRyaWVzO1xyXG4gICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2VudHJpZXMpIHtcclxuICAgICAgICBpZiAodGhpcy5fZW50cmllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgZW50cmllcyA9IHRoaXMuX2VudHJpZXNbbmFtZV07XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBlbnRyaWVzW2ldLCBuYW1lLCB0aGlzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHJvdG8ua2V5cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgICAgaXRlbXMucHVzaChuYW1lKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjcmVhdGVJdGVyYXRvcihpdGVtcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RvLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaXRlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gY3JlYXRlSXRlcmF0b3IoaXRlbXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90by5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgICBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGNyZWF0ZUl0ZXJhdG9yKGl0ZW1zKTtcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGl0ZXJhdG9yU3VwcG9ydGVkKSB7XHJcbiAgICAgIHByb3RvW1N5bWJvbC5pdGVyYXRvcl0gPSBwcm90by5lbnRyaWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBzZWFyY2hBcnJheSA9IFtdO1xyXG4gICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgICBzZWFyY2hBcnJheS5wdXNoKHNlcmlhbGl6ZVBhcmFtKG5hbWUpICsgJz0nICsgc2VyaWFsaXplUGFyYW0odmFsdWUpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBzZWFyY2hBcnJheS5qb2luKCcmJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ19mcm9tU3RyaW5nJywge1xyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcclxuICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24oc2VhcmNoU3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fZW50cmllcyA9IHt9O1xyXG4gICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpO1xyXG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gc2VhcmNoU3RyaW5nLnNwbGl0KCcmJyk7XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgICAgIHRoaXMuYXBwZW5kKFxyXG4gICAgICAgICAgICBkZXNlcmlhbGl6ZVBhcmFtKGF0dHJpYnV0ZVswXSksXHJcbiAgICAgICAgICAgIChhdHRyaWJ1dGUubGVuZ3RoID4gMSkgPyBkZXNlcmlhbGl6ZVBhcmFtKGF0dHJpYnV0ZVsxXSkgOiAnJ1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGdsb2JhbC5VUkxTZWFyY2hQYXJhbXMgPSBVUkxTZWFyY2hQYXJhbXM7XHJcbiAgfTtcclxuXHJcbiAgaWYgKCEoJ1VSTFNlYXJjaFBhcmFtcycgaW4gZ2xvYmFsKSB8fCAobmV3IFVSTFNlYXJjaFBhcmFtcygnP2E9MScpLnRvU3RyaW5nKCkgIT09ICdhPTEnKSkge1xyXG4gICAgcG9seWZpbGxVUkxTZWFyY2hQYXJhbXMoKTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5zb3J0ICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xyXG4gICAgICAgIGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSk7XHJcbiAgICAgICAgaWYgKCFfdGhpcy5fZW50cmllcykge1xyXG4gICAgICAgICAgX3RoaXMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGl0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIGlmIChhWzBdIDwgYlswXSkge1xyXG4gICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYVswXSA+IGJbMF0pIHtcclxuICAgICAgICAgIHJldHVybiArMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKF90aGlzLl9lbnRyaWVzKSB7IC8vIGZvcmNlIHJlc2V0IGJlY2F1c2UgSUUga2VlcHMga2V5cyBpbmRleFxyXG4gICAgICAgIF90aGlzLl9lbnRyaWVzID0ge307XHJcbiAgICAgIH1cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMuYXBwZW5kKGl0ZW1zW2ldWzBdLCBpdGVtc1tpXVsxXSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBIVE1MQW5jaG9yRWxlbWVudFxyXG5cclxufSkoXHJcbiAgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSA/IGdsb2JhbFxyXG4gICAgOiAoKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvd1xyXG4gICAgOiAoKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgPyBzZWxmIDogdGhpcykpXHJcbik7XHJcblxyXG4oZnVuY3Rpb24oZ2xvYmFsKSB7XHJcbiAgLyoqXHJcbiAgICogUG9seWZpbGwgVVJMXHJcbiAgICpcclxuICAgKiBJbnNwaXJlZCBmcm9tIDogaHR0cHM6Ly9naXRodWIuY29tL2Fydi9ET00tVVJMLVBvbHlmaWxsL2Jsb2IvbWFzdGVyL3NyYy91cmwuanNcclxuICAgKi9cclxuXHJcbiAgdmFyIGNoZWNrSWZVUkxJc1N1cHBvcnRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdmFyIHUgPSBuZXcgVVJMKCdiJywgJ2h0dHA6Ly9hJyk7XHJcbiAgICAgIHUucGF0aG5hbWUgPSAnYyUyMGQnO1xyXG4gICAgICByZXR1cm4gKHUuaHJlZiA9PT0gJ2h0dHA6Ly9hL2MlMjBkJykgJiYgdS5zZWFyY2hQYXJhbXM7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgdmFyIHBvbHlmaWxsVVJMID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgX1VSTCA9IGdsb2JhbC5VUkw7XHJcblxyXG4gICAgdmFyIFVSTCA9IGZ1bmN0aW9uKHVybCwgYmFzZSkge1xyXG4gICAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHVybCA9IFN0cmluZyh1cmwpO1xyXG5cclxuICAgICAgLy8gT25seSBjcmVhdGUgYW5vdGhlciBkb2N1bWVudCBpZiB0aGUgYmFzZSBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGxvY2F0aW9uLlxyXG4gICAgICB2YXIgZG9jID0gZG9jdW1lbnQsIGJhc2VFbGVtZW50O1xyXG4gICAgICBpZiAoYmFzZSAmJiAoZ2xvYmFsLmxvY2F0aW9uID09PSB2b2lkIDAgfHwgYmFzZSAhPT0gZ2xvYmFsLmxvY2F0aW9uLmhyZWYpKSB7XHJcbiAgICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKTtcclxuICAgICAgICBiYXNlRWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KCdiYXNlJyk7XHJcbiAgICAgICAgYmFzZUVsZW1lbnQuaHJlZiA9IGJhc2U7XHJcbiAgICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoYmFzZUVsZW1lbnQpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAoYmFzZUVsZW1lbnQuaHJlZi5pbmRleE9mKGJhc2UpICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoYmFzZUVsZW1lbnQuaHJlZik7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTCB1bmFibGUgdG8gc2V0IGJhc2UgJyArIGJhc2UgKyAnIGR1ZSB0byAnICsgZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBhbmNob3JFbGVtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgYW5jaG9yRWxlbWVudC5ocmVmID0gdXJsO1xyXG4gICAgICBpZiAoYmFzZUVsZW1lbnQpIHtcclxuICAgICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChhbmNob3JFbGVtZW50KTtcclxuICAgICAgICBhbmNob3JFbGVtZW50LmhyZWYgPSBhbmNob3JFbGVtZW50LmhyZWY7IC8vIGZvcmNlIGhyZWYgdG8gcmVmcmVzaFxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoYW5jaG9yRWxlbWVudC5wcm90b2NvbCA9PT0gJzonIHx8ICEvOi8udGVzdChhbmNob3JFbGVtZW50LmhyZWYpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBVUkwnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfYW5jaG9yRWxlbWVudCcsIHtcclxuICAgICAgICB2YWx1ZTogYW5jaG9yRWxlbWVudFxyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvLyBjcmVhdGUgYSBsaW5rZWQgc2VhcmNoUGFyYW1zIHdoaWNoIHJlZmxlY3QgaXRzIGNoYW5nZXMgb24gVVJMXHJcbiAgICAgIHZhciBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHRoaXMuc2VhcmNoKTtcclxuICAgICAgdmFyIGVuYWJsZVNlYXJjaFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIHZhciBlbmFibGVTZWFyY2hQYXJhbXNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICBbJ2FwcGVuZCcsICdkZWxldGUnLCAnc2V0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgdmFyIG1ldGhvZCA9IHNlYXJjaFBhcmFtc1ttZXRob2ROYW1lXTtcclxuICAgICAgICBzZWFyY2hQYXJhbXNbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIG1ldGhvZC5hcHBseShzZWFyY2hQYXJhbXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICBpZiAoZW5hYmxlU2VhcmNoVXBkYXRlKSB7XHJcbiAgICAgICAgICAgIGVuYWJsZVNlYXJjaFBhcmFtc1VwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBfdGhpcy5zZWFyY2ggPSBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgZW5hYmxlU2VhcmNoUGFyYW1zVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc2VhcmNoUGFyYW1zJywge1xyXG4gICAgICAgIHZhbHVlOiBzZWFyY2hQYXJhbXMsXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHZhciBzZWFyY2ggPSB2b2lkIDA7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX3VwZGF0ZVNlYXJjaFBhcmFtcycsIHtcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5zZWFyY2ggIT09IHNlYXJjaCkge1xyXG4gICAgICAgICAgICBzZWFyY2ggPSB0aGlzLnNlYXJjaDtcclxuICAgICAgICAgICAgaWYgKGVuYWJsZVNlYXJjaFBhcmFtc1VwZGF0ZSkge1xyXG4gICAgICAgICAgICAgIGVuYWJsZVNlYXJjaFVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2VhcmNoUGFyYW1zLl9mcm9tU3RyaW5nKHRoaXMuc2VhcmNoKTtcclxuICAgICAgICAgICAgICBlbmFibGVTZWFyY2hVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHByb3RvID0gVVJMLnByb3RvdHlwZTtcclxuXHJcbiAgICB2YXIgbGlua1VSTFdpdGhBbmNob3JBdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgYXR0cmlidXRlTmFtZSwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yRWxlbWVudFthdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuX2FuY2hvckVsZW1lbnRbYXR0cmlidXRlTmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFsnaGFzaCcsICdob3N0JywgJ2hvc3RuYW1lJywgJ3BvcnQnLCAncHJvdG9jb2wnXVxyXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgbGlua1VSTFdpdGhBbmNob3JBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ3NlYXJjaCcsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yRWxlbWVudFsnc2VhcmNoJ107XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9hbmNob3JFbGVtZW50WydzZWFyY2gnXSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVNlYXJjaFBhcmFtcygpO1xyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwcm90bywge1xyXG5cclxuICAgICAgJ3RvU3RyaW5nJzoge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaHJlZjtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgJ2hyZWYnOiB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLl9hbmNob3JFbGVtZW50LmhyZWYucmVwbGFjZSgvXFw/JC8sICcnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuX2FuY2hvckVsZW1lbnQuaHJlZiA9IHZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5fdXBkYXRlU2VhcmNoUGFyYW1zKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAncGF0aG5hbWUnOiB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLl9hbmNob3JFbGVtZW50LnBhdGhuYW1lLnJlcGxhY2UoLyheXFwvPykvLCAnLycpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgdGhpcy5fYW5jaG9yRWxlbWVudC5wYXRobmFtZSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgJ29yaWdpbic6IHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gZ2V0IGV4cGVjdGVkIHBvcnQgZnJvbSBwcm90b2NvbFxyXG4gICAgICAgICAgdmFyIGV4cGVjdGVkUG9ydCA9IHsgJ2h0dHA6JzogODAsICdodHRwczonOiA0NDMsICdmdHA6JzogMjEgfVt0aGlzLl9hbmNob3JFbGVtZW50LnByb3RvY29sXTtcclxuICAgICAgICAgIC8vIGFkZCBwb3J0IHRvIG9yaWdpbiBpZiwgZXhwZWN0ZWQgcG9ydCBpcyBkaWZmZXJlbnQgdGhhbiBhY3R1YWwgcG9ydFxyXG4gICAgICAgICAgLy8gYW5kIGl0IGlzIG5vdCBlbXB0eSBmLmUgaHR0cDovL2Zvbzo4MDgwXHJcbiAgICAgICAgICAvLyA4MDgwICE9IDgwICYmIDgwODAgIT0gJydcclxuICAgICAgICAgIHZhciBhZGRQb3J0VG9PcmlnaW4gPSB0aGlzLl9hbmNob3JFbGVtZW50LnBvcnQgIT0gZXhwZWN0ZWRQb3J0ICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2FuY2hvckVsZW1lbnQucG9ydCAhPT0gJyc7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvckVsZW1lbnQucHJvdG9jb2wgK1xyXG4gICAgICAgICAgICAnLy8nICtcclxuICAgICAgICAgICAgdGhpcy5fYW5jaG9yRWxlbWVudC5ob3N0bmFtZSArXHJcbiAgICAgICAgICAgIChhZGRQb3J0VG9PcmlnaW4gPyAoJzonICsgdGhpcy5fYW5jaG9yRWxlbWVudC5wb3J0KSA6ICcnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgICAgfSxcclxuXHJcbiAgICAgICdwYXNzd29yZCc6IHsgLy8gVE9ET1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAndXNlcm5hbWUnOiB7IC8vIFRPRE9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgVVJMLmNyZWF0ZU9iamVjdFVSTCA9IGZ1bmN0aW9uKGJsb2IpIHtcclxuICAgICAgcmV0dXJuIF9VUkwuY3JlYXRlT2JqZWN0VVJMLmFwcGx5KF9VUkwsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVSTC5yZXZva2VPYmplY3RVUkwgPSBmdW5jdGlvbih1cmwpIHtcclxuICAgICAgcmV0dXJuIF9VUkwucmV2b2tlT2JqZWN0VVJMLmFwcGx5KF9VUkwsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdsb2JhbC5VUkwgPSBVUkw7XHJcblxyXG4gIH07XHJcblxyXG4gIGlmICghY2hlY2tJZlVSTElzU3VwcG9ydGVkKCkpIHtcclxuICAgIHBvbHlmaWxsVVJMKCk7XHJcbiAgfVxyXG5cclxuICBpZiAoKGdsb2JhbC5sb2NhdGlvbiAhPT0gdm9pZCAwKSAmJiAhKCdvcmlnaW4nIGluIGdsb2JhbC5sb2NhdGlvbikpIHtcclxuICAgIHZhciBnZXRPcmlnaW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIGdsb2JhbC5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBnbG9iYWwubG9jYXRpb24uaG9zdG5hbWUgKyAoZ2xvYmFsLmxvY2F0aW9uLnBvcnQgPyAoJzonICsgZ2xvYmFsLmxvY2F0aW9uLnBvcnQpIDogJycpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLmxvY2F0aW9uLCAnb3JpZ2luJywge1xyXG4gICAgICAgIGdldDogZ2V0T3JpZ2luLFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGdsb2JhbC5sb2NhdGlvbi5vcmlnaW4gPSBnZXRPcmlnaW4oKTtcclxuICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KShcclxuICAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpID8gZ2xvYmFsXHJcbiAgICA6ICgodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93XHJcbiAgICA6ICgodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSA/IHNlbGYgOiB0aGlzKSlcclxuKTtcclxuIiwiaW1wb3J0ICd1cmwtcG9seWZpbGwnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vY29yZS9VdGlscy5qcyc7XHJcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnLi4vY29yZS9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQge0NyZWF0ZVJlcXVlc3R9IGZyb20gJy4uL2NvcmUvVXJsRmFjdG9yeS5qcyc7XHJcblxyXG5jbGFzcyBBcnRpY2xlc1NlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmV3cyhzb3VyY2UpIHtcclxuICAgICAgICBsZXQgdXJscyA9IHNvdXJjZS5tYXAocyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7IHNvdXJjZTogcywgYXBpS2V5OiBDb25zdGFudHMuQXBpS2V5LCB0eXBlOlwiR2V0XCIgfTtcclxuICAgICAgICAgICAgcmV0dXJuIENyZWF0ZVJlcXVlc3QoQ29uc3RhbnRzLkFydGljbGVzVXJsLCBwYXJhbXMpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgdXRpbHMgPSBuZXcgVXRpbHMoKTtcclxuICAgICAgICB1dGlscy5zZW5kUmVxdWVzdEZvckpzb24odXJscywgdGhpcy5zaG93TmV3cyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNob3dOZXdzKGRhdGEpIHtcclxuICAgICAgICBsZXQgbmV3c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3cy1jb250YWluZXJcIik7XHJcbiAgICAgICAgbmV3c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBsZXQgYXJ0aWNsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFydGljbGVzLnB1c2goLi4uKGRhdGFbaV0uYXJ0aWNsZXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFydGljbGVzID0gYXJ0aWNsZXMuc29ydCgoeCwgeSkgPT4gRGF0ZS5wYXJzZSh5LnB1Ymxpc2hlZEF0KSAtIERhdGUucGFyc2UoeC5wdWJsaXNoZWRBdCkpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENvbnN0YW50cy5OdW1iZXJPZk5ld3M7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWFydGljbGVzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBhcnQgPSBhcnRpY2xlc1tpXTtcclxuICAgICAgICAgICAgbGV0IGFydGljbGVUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGxldCBwdWJsaXNoZWQgPSBhcnQucHVibGlzaGVkQXQgPyBgUHVibGlzaGVkOiAke2FydC5wdWJsaXNoZWRBdC5zdWJzdHIoMCwgMTApfS4gYCA6IFwiXCI7XHJcbiAgICAgICAgICAgIGxldCBhcnREZXNjID0gYXJ0LmRlc2NyaXB0aW9uID8gYXJ0LmRlc2NyaXB0aW9uIDogXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGxldCBhcnRJbWcgPSAnJztcclxuICAgICAgICAgICAgbGV0IHBhdCA9IC8oPzw9aHR0cClzPzpcXC9cXC8vaTtcclxuICAgICAgICAgICAgaWYgKHBhdC50ZXN0KGFydC51cmxUb0ltYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgYXJ0SW1nID0gYDxpbWcgc3JjPScke2FydC51cmxUb0ltYWdlfScvPjwvYT5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXJ0SW1nID0gYXJ0LnVybFRvSW1hZ2UgPyBgPGltZyBzcmM9JyR7YXJ0LnVybC50b1N0cmluZygpLmNvbmNhdChhcnQudXJsVG9JbWFnZSl9Jy8+PC9hPmAgOiAnU2VlIG1vcmUuLi4nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhcnRpY2xlVGVtcGxhdGUuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9J2FydGljbGUnPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nYXJ0aWNsZS1oZWFkZXInPjxoMj4ke2FydC50aXRsZX08L2gyPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nYXJ0aWNsZS1ib2R5Jz4gPGEgaHJlZj0nJHthcnQudXJsfScgdGFyZ2V0PSdfYmxhbmsnPiR7YXJ0SW1nfTwvYT4gJHthcnREZXNjfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nYXJ0aWNsZS1mb290ZXInPiBcclxuICAgICAgICAgICAgICAgICAgICAke3B1Ymxpc2hlZH1cclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdodHRwczovL25ld3NhcGkub3JnJyB0YXJnZXQ9J19ibGFuayc+UG93ZXJlZCBieSBOZXdzQVBJLm9yZzwvYT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgICAgICAgICAgbmV3c0NvbnRhaW5lci5hcHBlbmRDaGlsZChhcnRpY2xlVGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcHBseUZpbHRlcnMoKSB7XHJcbiAgICAgICAgbGV0IHNvdXJjZXNJZHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic291cmNlLWNoZWNrYm94XCIpLCAwKSAvL2NvbnZlcnQgdG8gYXJyYXlcclxuICAgICAgICAgICAgLmZpbHRlcihjID0+IGMuY2hlY2tlZClcclxuICAgICAgICAgICAgLm1hcChjID0+IGMuaWQpO1xyXG4gICAgICAgIHRoaXMuZ2V0TmV3cyhzb3VyY2VzSWRzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXJ0aWNsZXNTZXJ2aWNlOyJdLCJzb3VyY2VSb290IjoiIn0=