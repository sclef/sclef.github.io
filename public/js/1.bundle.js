(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./src/js/services/ArticlesService.js":
/*!********************************************!*\
  !*** ./src/js/services/ArticlesService.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var url_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! url-polyfill */ \"./node_modules/url-polyfill/url-polyfill.js\");\n/* harmony import */ var url_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(url_polyfill__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_Utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Utils.js */ \"./src/js/core/Utils.js\");\n/* harmony import */ var _core_Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Constants.js */ \"./src/js/core/Constants.js\");\n/* harmony import */ var _core_Constants_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_core_Constants_js__WEBPACK_IMPORTED_MODULE_2__);\n\r\n\r\n\r\n\r\nclass ArticlesService {\r\n    constructor() {\r\n    }\r\n\r\n    getNews(source) {\r\n        let urls = source.map(s => {\r\n            let SourceUrl = new URL(_core_Constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.ArticlesUrl);\r\n            let params = { source: s, apiKey: _core_Constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.ApiKey };\r\n\r\n            Object.keys(params).forEach(key => SourceUrl.searchParams.append(key, params[key]))\r\n            return SourceUrl;\r\n        });\r\n        let utils = new _core_Utils_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n        utils.sendRequestForJson(urls, this.showNews);\r\n\r\n    }\r\n\r\n    showNews(data) {\r\n        let newsContainer = document.getElementById(\"news-container\");\r\n        newsContainer.innerHTML = '';\r\n        let articles = [];\r\n\r\n        for (let i = 0; i < data.length; i++) {\r\n            articles.push(...(data[i].articles));\r\n        }\r\n\r\n        articles = articles.sort((x, y) => Date.parse(y.publishedAt) - Date.parse(x.publishedAt));\r\n\r\n        for (let i = 0; i < _core_Constants_js__WEBPACK_IMPORTED_MODULE_2___default.a.NumberOfNews; i++) {\r\n            if (!articles[i]) {\r\n                return;\r\n            }\r\n\r\n            let art = articles[i];\r\n            let articleTemplate = document.createElement(\"div\");\r\n            let published = art.publishedAt ? `Published: ${art.publishedAt.substr(0, 10)}. ` : \"\";\r\n            let artDesc = art.description ? art.description : \"\";\r\n\r\n            let artImg = '';\r\n            let pat = /(?<=http)s?:\\/\\//i;\r\n            if (pat.test(art.urlToImage)) {\r\n                artImg = `<img src='${art.urlToImage}'/></a>`;\r\n            }\r\n            else {\r\n                artImg = art.urlToImage ? `<img src='${art.url.toString().concat(art.urlToImage)}'/></a>` : 'See more...';\r\n            }\r\n\r\n            articleTemplate.innerHTML = `<div class='article'>\r\n                <div class='article-header'><h2>${art.title}</h2></div>\r\n                <div class='article-body'> <a href='${art.url}' target='_blank'>${artImg}</a> ${artDesc}</div>\r\n                <div class='article-footer'> \r\n                    ${published}\r\n                    <a href='https://newsapi.org' target='_blank'>Powered by NewsAPI.org</a>\r\n                </div>\r\n            </div>`;\r\n\r\n            newsContainer.appendChild(articleTemplate);\r\n        }\r\n    }\r\n\r\n    applyFilters() {\r\n        let sourcesIds = Array.prototype.slice.call(document.getElementsByClassName(\"source-checkbox\"), 0) //convert to array\r\n            .filter(c => c.checked)\r\n            .map(c => c.id);\r\n        this.getNews(sourcesIds);\r\n    }\r\n}\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (ArticlesService);\n\n//# sourceURL=webpack:///./src/js/services/ArticlesService.js?");

/***/ })

}]);